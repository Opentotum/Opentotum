<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>2d_milling_workflow []</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="2d_milling_workflow"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title=""/>
<link rel="start" href="/"/>
<link rel="contents" href="/doku.php?id=2d_milling_workflow&amp;do=index" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="/feed.php?mode=list&amp;ns="/>
<link rel="alternate" type="text/html" title="Plain HTML" href="/doku.php?do=export_xhtml&amp;id=2d_milling_workflow"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="/doku.php?do=export_raw&amp;id=2d_milling_workflow"/>
<link rel="canonical" href="http://wiki.fabtotum.com/doku.php?id=2d_milling_workflow"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=dokuwiki&amp;tseed=d5da11854e19a001251a5239d97c187a"/>
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"id":"2d_milling_workflow","namespace":""};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?tseed=d5da11854e19a001251a5239d97c187a"></script>

    <script type="text/javascript">
    //<![CDATA[ 
    function LoadScript( url )
    {
     document.write( '<scr' + 'ipt type="text/javascript" src="' + url + '"><\/scr' + 'ipt>' ) ;        

    }
//]]> 

 </script>
<script type="text/javascript"> var ID = "2d_milling_workflow"; </script>    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="/lib/tpl/dokuwiki/images/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/dokuwiki/images/apple-touch-icon.png" />
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_dokuwiki     ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="/doku.php?id=start"  accesskey="h" title="[H]"><img src="/lib/exe/fetch.php?media=wiki:logo.png" width="500" height="120" alt="" /> <span></span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="/doku.php?id=2d_milling_workflow&amp;do=register"  class="action register" rel="nofollow" title="Register">Register</a></li><li><a href="/doku.php?id=2d_milling_workflow&amp;do=login&amp;sectok=77c49597f82efe7d3c201d89044cd738"  class="action login" rel="nofollow" title="Login">Login</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="/doku.php?id=start" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="/doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="2d_milling_workflow" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Show pagesource</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Login</option><option value="register">Register</option></optgroup></select><input type="submit" value="&gt;" /></div></form>            </div>
            <ul>
                <li><a href="/doku.php?id=2d_milling_workflow&amp;do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a></li><li><a href="/doku.php?id=2d_milling_workflow&amp;do=media&amp;ns="  class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li><li><a href="/doku.php?id=2d_milling_workflow&amp;do=index"  class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                                        <div class="trace"><span class="bchead">Trace:</span> <span class="bcsep">•</span> <span class="curid"><bdi><a href="/doku.php?id=2d_milling_workflow"  class="breadcrumbs" title="2d_milling_workflow">2d_milling_workflow</a></bdi></span></div>
                    </div>
    
    
    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>2d_milling_workflow</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#d_milling">2.5D milling</a></div>
<ul class="toc">
<li class="clear">
<ul class="toc">
<li class="level3"><div class="li"><a href="#toolchain_1freecad_dxf_output_tweaking_with_librecad_heekscad_fabtotum">Toolchain 1: FreeCAD DXF output  Tweaking with LibreCAD  Heekscad  FABtotum</a></div></li>
<li class="level3"><div class="li"><a href="#toolchain_2freecad_step_export_heekscad_import_step_convert_face_to_sketch_fabtotum">Toolchain 2: FreeCAD STEP export  Heekscad import STEP/Convert Face to sketch  FABtotum</a></div></li>
<li class="level3"><div class="li"><a href="#toolchain_3kicad_dxf_export_librecad_import_dxf_and_save_as_dxf_2007_heekscad_import_dxf_fabtotum">Toolchain 3: KiCAD DXF export  LibreCAD import DXF and save as DXF 2007  Heekscad import DXF  FABtotum</a></div></li>
<li class="level3"><div class="li"><a href="#toolchain_4gerber_flatcam_fabtotum">Toolchain 4: Gerber  Flatcam  FABtotum</a></div></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="d_milling">2.5D milling</h1>
<div class="level1">

<p>
<a href="/lib/exe/detail.php?id=2d_milling_workflow&amp;media=2d3d.jpg" class="media" title="2d3d.jpg"><img src="/lib/exe/fetch.php?w=506&amp;h=205&amp;tok=256998&amp;media=2d3d.jpg" class="media" title="Stampa" alt="Stampa" width="506" height="205" /></a>
</p>

<p>
A 2.5D image is a simplified three-dimensional (x, y, z) surface representation that contains at most one depth (z) value for every point in the (x, y) plane.
</p>

</div>

<h3 class="sectionedit2" id="toolchain_1freecad_dxf_output_tweaking_with_librecad_heekscad_fabtotum">Toolchain 1: FreeCAD DXF output  Tweaking with LibreCAD  Heekscad  FABtotum</h3>
<div class="level3">

<p>
Actually you can supposely use whatever software you feel like using that can export a DXF. But my best results were by using the DXF exported by LibreCAD using the DXF in the 2007 version. LibreCAD also allows to move the cutting profile and in this way set the origin.
</p>

<p>
What I wanted to mill was a support material for milling, a MDF of 2 cm depth with the slots and holes of the milling plane of the FABtotum. This was it in FreeCAD:
</p>

<p>
<a href="/lib/exe/detail.php?id=2d_milling_workflow&amp;media=freecad_millingplane.png" class="media" title="freecad_millingplane.png"><img src="/lib/exe/fetch.php?w=200&amp;tok=443428&amp;media=freecad_millingplane.png" class="media" alt="" width="200" /></a>
</p>

<p>
This is the result imported in LibreCAD and allowing the origin to be centered in the MDF table:
</p>

<p>
<a href="/lib/exe/detail.php?id=2d_milling_workflow&amp;media=librecad_millingplane.png" class="media" title="librecad_millingplane.png"><img src="/lib/exe/fetch.php?w=200&amp;tok=793278&amp;media=librecad_millingplane.png" class="media" alt="" width="200" /></a>
</p>

<p>
I also removed the two bottom slots of the corners, because there is where I have my fixations during manufacturing and I did not want tool colisions.
</p>

<p>
I saved the result using the 2007 DXF version and imported that DXF into Heekscad (I used latest git version):
</p>

<p>
<a href="/lib/exe/detail.php?id=2d_milling_workflow&amp;media=heekscad_millingplane.png" class="media" title="heekscad_millingplane.png"><img src="/lib/exe/fetch.php?w=200&amp;tok=8b4186&amp;media=heekscad_millingplane.png" class="media" alt="" width="200" /></a>
</p>

<p>
In that image you can see that I created a pocket. The mill I used for manufacturing is a 12 mm long 3 mm endmill. The values I used for the pocket are milling 10 mm (ends in -10 mm) in steps of 2 mm at 400 mm/min feedrate vertical and horizontal at 7000 rpm.
</p>

<p>
With this values you guessed it, I only milled half of my 20 mm MDF, and had to repeat the procedure from the other face. Why? Because I did not have a longer mill handy. Also take into account that even if my mill was 12 mm, I could only use the first 10 mm because otherwise the extruder would hit the MDF panel.
</p>

<p>
But if you generate that code, it won&#039;t work very well or at least it did not for me. Then I realised I had to tweak the gcode to be “Marlin/Fabtotum” compatible. At the end I opted for creating a definition of a new machine in Heekscad and a specific gcode post-processor. It is the first time I do something like this, so it may not work for everything… Here they are the files containing the machine definition and the post-processor:
</p>

<p>
/usr/share/heekscnc/machines.xml /usr/lib/heekscnc/nc/marlin.py
</p>

<p>
in here: <a href="/lib/exe/fetch.php?media=fabtotum4heeks.zip" class="media mediafile mf_zip" title="fabtotum4heeks.zip (15.3 KB)">fabtotum4heeks.zip</a>  (updated to 15 March, see GitHub for changelog)
</p>

<p>
The result is this (well I used it quite a lot before uploading this foto and it got “hurt” in the process):
</p>

<p>
<a href="/lib/exe/detail.php?id=2d_milling_workflow&amp;media=20150313_111546.jpg" class="media" title="20150313_111546.jpg"><img src="/lib/exe/fetch.php?w=200&amp;tok=b53a7c&amp;media=20150313_111546.jpg" class="media" title="ASCII   User comments" alt="ASCII   User comments" width="200" /></a><a href="/lib/exe/detail.php?id=2d_milling_workflow&amp;media=20150314_143945.jpg" class="media" title="20150314_143945.jpg"><img src="/lib/exe/fetch.php?w=200&amp;tok=99aee8&amp;media=20150314_143945.jpg" class="media" title="ASCII   User comments" alt="ASCII   User comments" width="200" /></a>
</p>

<p>
Of course, I simulated the gcode in openscam before uploading it to the FABtotum. However, I found out that sometimes arcs seem to be in the wrong direction in OpenSCAM, while the code as generated by Heekscad produces the right result.
</p>

</div>

<h3 class="sectionedit3" id="toolchain_2freecad_step_export_heekscad_import_step_convert_face_to_sketch_fabtotum">Toolchain 2: FreeCAD STEP export  Heekscad import STEP/Convert Face to sketch  FABtotum</h3>
<div class="level3">

<p>
This is an alternative toolchain. After importing with Heekscad and converting a face to a sketch, the flow is exactly the same as above.
</p>

</div>

<h3 class="sectionedit4" id="toolchain_3kicad_dxf_export_librecad_import_dxf_and_save_as_dxf_2007_heekscad_import_dxf_fabtotum">Toolchain 3: KiCAD DXF export  LibreCAD import DXF and save as DXF 2007  Heekscad import DXF  FABtotum</h3>
<div class="level3">

<p>
The intermediate step via LibreCAD is necessary as otherwise Heekscad imports the milimeters as if there were millis (10^-3 inches). After having imported the tracks in Heekscad, the result fo the sketch is marked in the properties as “Bad”. Change this to “re-order” and it will automatically switch to “multi”, allowing you to perform machining operations on the profile.
</p>

</div>

<h3 class="sectionedit5" id="toolchain_4gerber_flatcam_fabtotum">Toolchain 4: Gerber  Flatcam  FABtotum</h3>
<div class="level3">

<p>
Flatcam does not currently support successive passes at different depths. So you will have to make sure that you use a mill configuration that withstands the tool deflection during the milling or your tool will break. Not having sucesive passes at different depths puts a limitation on the smaller mill diameter you may use, or the type of tool (engraving V shaped vs endmill).
</p>

</div>


    <script type="text/javascript">
    //<![CDATA[ 

    try {
    if(!HTMLParserInstalled){
         LoadScript("/lib/plugins/fckg/scripts/script-cmpr.js");        
    }
    }
    catch (ex) {  
         LoadScript("/lib/plugins/fckg/scripts/script-cmpr.js");        
    }             

    function createRequestValue() {
        try{
        var inputNode=document.createElement('input');
        inputNode.setAttribute('type','hidden');
        inputNode.setAttribute('value','yes');
        inputNode.setAttribute('name','dwedit_preview');
        inputNode.setAttribute('id','dwedit_preview');
        var dwform = GetE("dw__editform");
        dwform.appendChild(inputNode);
        }catch(e) { alert(e); }
    }
//]]> 
 </script>
                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>2d_milling_workflow.txt</bdi> · Last modified: 2015/07/07 12:44 by <bdi>jj</bdi></div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="/doku.php?id=2d_milling_workflow&amp;do=edit"  class="action source" accesskey="v" rel="nofollow" title="Show pagesource [V]"><span>Show pagesource</span></a></li><li><a href="/doku.php?id=2d_milling_workflow&amp;do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="/doku.php?id=2d_milling_workflow&amp;do=backlink"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license" class="urlextern">CC Attribution-Noncommercial-Share Alike 3.0 Unported</a></bdi></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license"><img src="/lib/images/license/button/cc-by-nc-sa.png" alt="CC Attribution-Noncommercial-Share Alike 3.0 Unported" /></a>        <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="/lib/tpl/dokuwiki/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://www.php.net" title="Powered by PHP" ><img
            src="/lib/tpl/dokuwiki/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="/lib/tpl/dokuwiki/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="/lib/tpl/dokuwiki/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="/lib/tpl/dokuwiki/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="/lib/exe/indexer.php?id=2d_milling_workflow&amp;1472401245" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->
</body>
</html>
